<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Documento com Assinatura</title>
<script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>
</head>
<body>

<h2>Documento</h2>
<p>Documento de autorização</p>

<button onclick="gerarQRCode()">Gerar QR Code para assinatura</button>

<div id="qrcode"></div>

<h3>Assinaturas</h3>
<div id="assinaturas"></div>

<script>
const documentoId = "doc123"; // pode ser dinâmico

function gerarQRCode() {
  document.getElementById("qrcode").innerHTML = "";

  const url = `https://SEU-USUARIO.github.io/SEU-REPOSITORIO/sign.html?doc=${documentoId}`;

  new QRCode(document.getElementById("qrcode"), {
    text: url,
    width: 200,
    height: 200
  });
}

async function carregarAssinaturas() {
  const res = await fetch(`http://localhost:3000/assinaturas/${documentoId}`);
  const dados = await res.json();

  const div = document.getElementById("assinaturas");
  div.innerHTML = "";

  dados.forEach(a => {
    div.innerHTML += `
      <p><strong>${a.nome}</strong></p>
      <img src="${a.assinatura}" width="200">
      <hr>
    `;
  });
}

setInterval(carregarAssinaturas, 3000);
</script>

</body>
</html>
